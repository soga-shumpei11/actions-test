name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on:
  [push]
  # push:
  #   paths:
  #     - 'xxx/*/version.json'
jobs:
    job3:
        runs-on: ubuntu-latest
        steps:
          - name: Check out repository code
            uses: actions/checkout@v4.2.2
          - name: Print Environment
            run: |
              set -euo pipefail


              git fetch origin ${{ github.event.before }} --depth=1

              echo "github.event.before: ${{ github.event.before }}"
              echo "github.sha: ${{ github.sha }}"

              before_version=$(git show ${{ github.event.before }}:xxx/dev/version.json | jq -r '.version')

              # éŽåŽ»ã®ã‚³ãƒŸãƒƒãƒˆã®versionã‚’å–å¾—
              before_version=$(git show ${{ github.event.before }}:xxx/dev/version.json | jq -r '.version')

              # ç¾åœ¨ã®ã‚³ãƒŸãƒƒãƒˆã®versionã‚’å–å¾—
              current_version=$(git show ${{ github.sha }}:xxx/dev/version.json | jq -r '.version')

              # ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å·®ã‚’ç¢ºèª
              if [ "$before_version" != "$current_version" ]; then
                echo "Version has changed: $before_version -> $current_version"
              else
                echo "Version has not changed: $current_version"
              fi
